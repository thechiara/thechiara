CC=clang 
LD=ld
INCLUDEDIR:= include

CCOPTAFT =     -std=gnu99  -g  -Wall  -c  -I$(INCLUDEDIR) -pthread   -I /usr/include/X11 -L /usr/X11/lib -lX11 


SOURCES := main.c emulation/emul.c emulation/chiaracompute.c dev/int.c dev/stack.c dev/time.c dev/pag.c dev/tasks.c dev/video.c dev/keyboard.c dev/mouse.c dev/hardrive.c dev/ethernet.c
OBJECTS := $(SOURCES:.c=.o)
OBJECTSD := $(SOURCES:.c=.d)




.PHONY: all   clean 



all : chiarav 


%.o: %.c
			
			clang  $<   -c -MD -o $@  $(CCOPTAFT)

			


chiarav: $(OBJECTS)
				clang -o chiarav $(OBJECTS) -pthread  -I /usr/include/X11 -L /usr/X11/lib -lX11 
				

clean: cleanf



cleanf: $(OBJECTS)
			rm -rf  chiarav
			rm -rf  $(OBJECTS)
			rm -rf  $(OBJECTSD)
